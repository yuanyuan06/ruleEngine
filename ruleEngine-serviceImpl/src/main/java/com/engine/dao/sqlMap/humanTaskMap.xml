<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.engine.dao.HumanTaskDao">

  <insert id="insertHumanTask" parameterType="com.engine.entity.task.HumanTask">
    INSERT INTO human_task
      (doc_num,
       name,
       order_id,
       order_type,
       role,
       `status`,
       `type`,
       user,
       create_user,
       create_time,
       last_modify_user,
       last_modify_time)
	VALUES
      (#{docNum},
       #{name},
       #{orderId},
       #{orderType},
       #{role},
       #{status},
       #{type},
       #{user},
       #{createUser},
       NOW(),
       #{lastModifyUser},
       NOW())
  </insert>


  <!--  任务事件  start -->
  <insert id="insertIncident" parameterType="com.engine.entity.task.Incident" keyProperty="id" useGeneratedKeys="true">
    <include refid="titleSnippetForInsertIncident" />
	VALUES
      ( #{docNum},
        #{inducement},
        #{name},
        #{orderItem},
        #{taskId},
        #{createUser},
        NOW(),
        #{lastModifyUser},
        NOW())
  </insert>
  
  <insert id="batchInsertIncident" parameterType="com.engine.entity.task.Incident" keyProperty="id" useGeneratedKeys="true">
    <include refid="titleSnippetForInsertIncident" />
    VALUES
    <foreach collection="list" item="item" separator=",">
      <include refid="valueSnippetForInsertIncident" />
    </foreach>

  </insert>
  
  <sql id="titleSnippetForInsertIncident" >
    INSERT INTO incident
     ( doc_num,
       inducement,
       name,
       order_item,
       task_id,
       create_user,
       create_time,
       last_modify_user,
       last_modify_time)
  </sql>

  <sql id="valueSnippetForInsertIncident" >
      ( #{item.docNum},
        #{item.inducement},
        #{item.name},
        #{item.orderItem},
        #{item.taskId},
        #{item.createUser},
        NOW(),
        #{item.lastModifyUser},
        NOW())
  </sql>

  <!-- 任务事件 end-->


</mapper>